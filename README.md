# 金種入力アプリ (Kinshu Input App)

## 1. プロジェクト概要

現金（紙幣・硬貨）の枚数を入力し、合計金額を自動計算・管理するWebアプリケーションです。
日本円（JPY）と中国人民元（CNY）に対応し、複数の「ノート」を作成して用途ごとの現金管理が可能です。PWA（Progressive Web App）に対応しており、スマートフォンやタブレットにインストールしてネイティブアプリのように利用できます。

## 2. 主要機能

*   **金種別計算**: 紙幣・硬貨ごとの枚数を入力し、リアルタイムで合計金額を算出
*   **多通貨対応**: 日本円 (JPY) と 中国人民元 (CNY) の切り替え
*   **ノート管理**: 複数の計算状態を「ノート」として保存・切り替え可能
*   **履歴・保存**: 計算結果を「保存ポイント」として履歴に記録（最大30件/ノート）
*   **カスタマイズ**:
    *   金種制限（2,000円札、小銭、紙幣の使用/不使用設定）
    *   ダークモード対応
*   **データ管理**:
    *   全データのJSON形式でのエクスポート/インポート（バックアップ）
    *   計算結果の画像（JPEG）ダウンロード
*   **PWA対応**: ホーム画面への追加、オフライン動作（キャッシュ範囲内）
*   **UI/UX**:
    *   スマートフォンに最適化されたタッチ操作
    *   計算機能付きオーバーレイテンキー

## 3. 使用方法

1.  **入力**: 各金種のエリアをタップし、テンキーで枚数を入力します。
2.  **ノート切替**: 画面左上のノート名（例:「新規ノート 1」）をタップして、ノートの新規作成や切り替えを行います。
3.  **保存**: 画面下部の「保存」ボタンから、現在の状態を履歴として保存します。
4.  **履歴確認**: 「履歴」ボタンから過去の保存データを確認・詳細表示できます。
5.  **設定**: 「設定」ボタンからダークモードやデータのバックアップ操作が可能です。
6.  **リセット**: 「クリア」ボタンで入力中の枚数を0に戻します。

## 4. 動作環境

*   **推奨ブラウザ**: Google Chrome, Safari, Edge, Firefox の最新版
*   **また**: iOS / Android のモダンブラウザ
*   **必須要件**: JavaScriptが有効であること、LocalStorageが利用可能であること

## 5. インストール・実行方法

本アプリケーションは静的なWebサイトとして構築されています。

### ローカルでの実行
1.  リポジトリをクローンまたはダウンロードします。
2.  プロジェクトのルートディレクトリ（`index.html`がある場所）をWebサーバーでホストします。
    *   VS Codeの "Live Server" 拡張機能などを使用すると簡単です。
    *   または `python -m http.server 8000` などを実行し、ブラウザで `http://localhost:8000` にアクセスします。

### 本番環境へのデプロイ
1.  プロジェクトファイル一式をWebサーバー（GitHub Pages, Vercel, Firebase Hostingなど）にアップロードします。
2.  HTTPS環境での配信を推奨します（PWA機能のため）。

## 6. ファイル構成

*   `index.html`: アプリケーションのエントリーポイント・構造定義
*   `app/`: JavaScriptソースコード
    *   `main.js`: アプリケーションの初期化・統合
    *   `core/`: コアロジック（状態管理`state.js`、データ定義`data.js`など）
    *   `ui/`: UI制御（レンダリング`renderer.js`、設定`settings.js`など）
    *   `export/`: 画像出力などのエクスポート機能
*   `css/`: スタイルシート
    *   `layout.css`, `components.css`: レイアウトとコンポーネントのデザイン
    *   `typography.css`, `reset.css`: フォントとリセットCSS
*   `manifest.json`: PWA設定ファイル
*   `sw.js`: Service Worker（キャッシュ・オフライン対応）

## 7. 制限事項・既知の問題

*   **データ保存**: すべてのデータはブラウザの `LocalStorage` に保存されます。ブラウザのキャッシュクリアを行うとデータが消失する可能性があります（JSONエクスポートでのバックアップを推奨）。
*   **履歴上限**: 1つのノートにつき保存できる履歴は最大 **30件** です。古い履歴は自動的に削除されます。
*   **インポート仕様**: JSONインポートは現在のデータを完全に上書きします。既存データとのマージは行われません。
*   **画像保存**: `html2canvas` ライブラリを使用していますが、ブラウザ環境によっては描画が完全に再現されない場合があります。

## 8. 技術仕様

- **言語**: HTML5, CSS3, JavaScript (ES Modules)
- **ライブラリ**:
    - `html2canvas`: 画面キャプチャ用
    - Google Material Symbols: アイコンフォント
- **アーキテクチャ**: Vanilla JS, Component-based CSS, LocalStorage State Management

## 9. ライセンス

*   本アプリケーションのソースコードのライセンスはプロジェクト管理者に確認してください（個人利用目的で開発）。
*   使用ライブラリ: [html2canvas](https://github.com/niklasvh/html2canvas) (MIT License)
